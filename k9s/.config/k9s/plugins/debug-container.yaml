---
plugins:
  #--- Create debug container for selected pod in current namespace
  # See https://kubernetes.io/docs/tasks/debug/debug-application/debug-running-pod/#ephemeral-container
  debug_container:
    shortCut: Shift-D
    description: Add debug container
    dangerous: true
    scopes:
      - containers
    command: bash
    background: false
    confirm: true
    args:
      - -c
      - "kubectl --kubeconfig=$KUBECONFIG debug -it --context $CONTEXT -n=$NAMESPACE $POD --target=$NAME --image=nicolaka/netshoot:latest --share-processes -- bash"
  debug_pod:
    shortCut: Shift-D
    description: Add debug pod
    dangerous: true
    scopes:
      - pods
    command: bash
    background: false
    confirm: true
    args:
      - -c
      - "kubectl --kubeconfig=$KUBECONFIG --context $CONTEXT run tmp-shell --rm -it --restart=Never -n=$NAMESPACE --image=nicolaka/netshoot:latest"
  debug_node:
    shortCut: Shift-D
    description: Add debug pod
    dangerous: true
    scopes:
      - node
    command: bash
    background: false
    confirm: true
    args:
      - -c
      - "kubectl netshoot debug node/$NAME"
